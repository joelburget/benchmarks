{% extends "base.html" %}

{% block title %}Editing {{ user.username }}{% endblock %}

{% block cssblock %}
<link rel="stylesheet" href="{{ MEDIA_URL }}css/validationEngine.jquery.css" type="text/css" media="screen" charset="utf-8" />
{% endblock %}

{% block content %}
<!-- Notice -->
<div class="notice">
  <h2>Notice</h2>
  <p><b>We will not share email addresses with the public.</b> Addresses are only displayed to other users, provided you allow it. Providing your address will make it even easier to collaborate with other users, and as such, is highly recommended.</p>
  <p><b>Profile pictures can be added through Gravatar.</b> To set up your profile picture, visit <a href="http://gravatar.com/site/signup">gravatar.com</a>, and register there with the same email address you used here. Once you upload your picture at Gravatar, we will automatically link up and display it here for you.</p>
</div>

<!-- Form -->
<h2>Edit Profile</h2>
<form action="." method="post" id="editForm">
<ol>
  {% csrf_token %}

  <li>{{ formset.first_name.label_tag }}</li>
  <li><input type="text" name="first_name" id="first_name" value="{{ user.first_name }}" /> {{ formset.first_name.errors }}<br /></li>

  <li>{{ formset.last_name.label_tag }}</li>
  <li><input type="text" name="last_name" id="last_name" value= "{{ user.last_name }}" /> {{ formset.last_name.errors }}<br /></li>

  <li>{{ formset.email.label_tag }}</li>
  <li><input class="validate[email, required]" type="text" name="email" id="email" value="{{ user.email }}" /> {{ formset.email.errors }}</li>

  <li><label for="showemail">Show Email to other users?</label>
  <input class="" type="checkbox" {% if user.get_profile.showemail %}checked="yes"{% endif %}" name="showemail" id="showemail" /></li>

  <li><label for="commentResponseSubscribe">Subscribe to comments in posts you have commented on?</label>
  <input class="" type="checkbox" {% if user.get_profile.commentResponseSubscribe %}checked="yes"{% endif %}" name="commentResponseSubscribe" id="commentResponseSubscribe" /></li>

  <li><label for="ownPostCommentSubscribe">Subscribe to posts you have commented on?</label>
  <input class="" type="checkbox" {% if user.get_profile.ownPostCommentSubscribe %}checked="yes"{% endif %}" name="ownPostCommentSubscribe" id="ownPostCommentSubscribe" /></li>

  <li><label for="groupPostSubscribe">Subscribe to posts by members of your group?</label>
  <input class="" type="checkbox" {% if user.get_profile.groupPostSubscribe %}checked="yes"{% endif %}" name="groupPostSubscribe" id="groupPostSubscribe" /></li>

  <li><label for="allProblemSubscribe">Subscribe to all new problems?</label>
  <input class="" type="checkbox" {% if user.get_profile.allProblemSubscribe %}checked="yes"{% endif %}" name="allProblemSubscribe" id="allProblemSubscribe" /></li>

  <li><label for="bio">Bio</label></li>
  <li><textarea class="validate[optional, length[0,200]]" name="bio" id="bio" value="{{ user.get_profile.bio }}"></textarea> {{ bioerrors }}</li>

  <li><input type="submit" value="Save Changes" /></li>
</ol>
</form>

{% block jsblock %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>

<script src="{{ MEDIA_URL }}js/jquery.validationEngine-en.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}js/jquery.validationEngine.js" type="text/javascript"></script>

<script>
$(document).ready(function() {
  $('#editForm').validationEngine();
});
</script>
{% endblock %}
{% endblock %}
