{% extends "base.html" %}

{% block title %}Posts{% endblock %}

{% block content %}
<h2>Posts</h2>

<h3>Search</h3>
<form action="." method="get" class="block">
  <p><a id="advancedlink" href="#">Advanced Search &rarr;</a></p>
  <p id="advanced">
        <label for="problem">Problem:</label><input type="checkbox" id="problem" name="problem" /><br />
    <label for="realization">Realization:</label><input type="checkbox" id="realization" name="realization" /><br />
    <label for="verification">Verification:</label><input type="checkbox" id="verification" name="verification" /><br />
    <label for="other">Other:</label><input type="checkbox" id="other" name="other" /><br />
  </p>

  <input type="text" name="searchtxt" id="searchtxt" value="{{ searchtxt }}" />
  
  <input type="submit" value="Search" />
</form>

<h3>Results</h3>
{% for post in posts.object_list %}
  <div class="block">
    <h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
    <p>{{ post.body|truncatewords_html:"50"|striptags }}</p>
    <p class="postInfo"><span class="postType"><a href="">{{ post.get_category_display }}</a></span> Posted by: <a href="{{ post.author.get_absolute_url }}">{{ post.author.first_name }} {{ post.author.last_name }}</a>, on {{ post.published }}</p>
  </div>
{% endfor %}

<div class="block">
  <p>
  {% if posts.has_previous %}
    <a href="?page={{ posts.previous_page_number }}">Previous</a>
  {% endif %}

  <b>Page {{ posts.number }} of {{ posts.paginator.num_pages }}</b>

  {% if posts.has_next %}
    <a href="?page={{ posts.next_page_number }}">Next</a>
  {% endif %}
  </p>
</div>
{% endblock %}

{% block jsblock %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#advanced').hide();
  $('#advancedlink').click(function() {
    if ($('#advanced').is(':visible')) {
      $('#advanced').slideUp();
    } else {
      $('#advanced').slideDown();
    }
  });
});
</script>
{% endblock %}
