{% extends "base.html" %}
{% load comments %}
{% load gravatar %}
{% load truncatesmart %}
{% load truncatesmart_html %}
{% load tex %}
{% block title %}Homepage{% endblock %}
{% block content %}
{% if not user.is_authenticated %}
<div id="rss">
  <img src="{{ MEDIA_URL }}img/feed-icon16x16.png" height="16px" width="16px" />
  <span><a href="/rss/">RSS</a> / <a href="/atom/">Atom</a></span>
</div>
<div id="welcome">
<h1>Welcome!</h1>
<p>Hello, and welcome to the OSU Reusable Software Research Group's online Benchmarks web application! Before joining, there are a few useful resources you might want to read. The <a href="/about/">About</a> page discusses the purpose and mission of the RSRG and Benchmarks application. The <a href="/getting-started">Getting Started</a> page will help you start creating, submitting, and posting your ideas.<p>
</div>
{% endif %}
<h1>Featured Posts &mdash; <a href="/posts">View all</a></h1>
{% if featured_posts %}
{% for object in featured_posts %}
	<div class="block">
	<h2><a href="{{ object.get_absolute_url }}">{{ object.title|truncatesmart:40 }}</a></h2>
	<p>{{ object.body|truncatesmart_html:250|striptags }}</p>
	{% get_comment_count for object as comment_count %}
  <p class="postInfo"><span class="postType"><a href="{{ object.get_absolute_category_url }}">{{ object.get_category_display }}</a></span> Posted by: <a href="{{ object.author.get_absolute_url }}">{{ object.author.get_profile.get_display_name }}</a>, on {{ object.published }}</p>
	</div>
{% endfor %}
{% else %}
<p>Sorry, we don't have any featured posts yet.</p>
{% endif %}

<h1>Latest Posts &mdash; <a href="/posts">View all</a></h1>
{% if latest_posts %}
{% for object in latest_posts %}
	<div class="block">
	<h2><a href="{{ object.get_absolute_url }}">{{ object.title|truncatesmart:40 }}</a></h2>
	<p>{{ object.body|truncatesmart_html:250|striptags }}</p>
	{% get_comment_count for object as comment_count %}
  <p class="postInfo"><span class="postType"><a href="{{ object.get_absolute_category_url }}">{{ object.get_category_display }}</a></span> Posted by: <a href="{{ object.author.get_absolute_url }}">{{ object.author.get_profile.get_display_name }}</a>, on {{ object.published }}</p>
  </div>
{% endfor %}
{% else %}
<p>Sorry, we don't have any recent posts.</p>
{% endif %}

<h1>Latest Discussion</h1>
{% if latest_discussion %}
<ul>
{% for comment in latest_discussion %}
  <li>
  <div id="c{{ comment.id }}">
    <p class="commentBox">{{ comment.submit_date|date:"F j, Y" }} at {{ comment.submit_date|date:"P" }} - <a href="{{ comment.user.get_absolute_url }}">{{ comment.user.get_profile.get_display_name }}</a> on <a href="{{ comment.get_absolute_url }}">{{ comment.content_object.title }}</a></p> 
    <div class="gravatar"><a href="{{ comment.user.get_absolute_url }}">{% gravatar comment.user.email 48 %}</a></div>
    <div class="comment">{{ comment.comment|linebreaks|tex_to_images }}</div>
  </div></li>
{% endfor %}
</ul>
{% else %}
<p>Sorry, we don't have any recent comments.</p>
{% endif %}
{% endblock %}
